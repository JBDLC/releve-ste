{% extends "layout.html" %}

{% block title %}Liste des rapports{% endblock %}

{% block content %}
<a href="/" class="btn btn-secondary mb-3 w-100">
    <svg aria-hidden="true" width="22" height="22" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;" fill="#1B2A4F" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 12L12 4l9 8v7a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-3h-2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" fill="#1B2A4F"/>
    </svg>
    Retour à l'accueil
</a>

<h2 class="text-center mb-4">Tous les rapports générés</h2>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Année</th>
            <th>Semaine</th>
            <th>Site</th>
            <th>Date de génération</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for r in rapports %}
        <tr>
            <td>{{ r.annee }}</td>
            <td>{{ r.semaine }}</td>
            <td>{{ r.site }}</td>
            <td>{{ r.timestamp|replace('T', ' ')|slice(0, 19) }}</td>
            <td>
                <a href="/rapport?semaine={{ r.semaine }}&annee={{ r.annee }}&site={{ r.site }}" class="btn btn-primary btn-sm">Voir</a>
                <a href="/rapport_pdf?semaine={{ r.semaine }}&annee={{ r.annee }}&site={{ r.site }}" class="btn btn-danger btn-sm">PDF</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if not rapports %}
    <div class="alert alert-info text-center">Aucun rapport généré pour l'instant.</div>
{% endif %}
{% endblock %} 